<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catálogo de Productos</title>

  <!-- Agrega los estilos y scripts de Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/CarritoCompras/paypal2.js"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=AQHb_kWVVp939vsNMtjykIhYmktL-OShdK7z_cBatgDZhq9y4kLV5omKE8rbhJ-u_trvLnrjZhbjFaFd&currency=USD"></script>

  <style>
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 20px;
      background-color: #ece2e2;
      border: 1px solid #ccc;
      z-index: 1;
      width: 20%;
    }

    .producto-container {
    text-align:center;
    margin-bottom: 35px;
    display: inline-block;
    width: 30%;
    margin-right: 3%;
    font-size:xx-small;
    }

    .producto-container img {
      max-width: 30%; 
      height: auto;
    }

    .button-container {
      align-items: center;
    margin-top: 60px;
  }

  .button-container button {
    margin: 2 auto;
    display: block;
    background-color: #14ac37 !important;
  }
  </style>
</head>
<body>
 
  


     <!-- Empieza la nav bar -->
     <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">VerdeVida</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item logged-out">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#signinModal"
                >Sign In</a
              >
            </li>
            <li class="nav-item logged-out">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#signupModal"
                >Sign Up</a
              >
            </li>
       
            <li class="nav-item logged-in">
              <a class="nav-link" href="#" id="logout">Log Out</a>
             
            
             
            </li>    
          </ul>
          
        </div>
      </div>

    <li class="nav-item logged-in">
      
      <div id="carrito-compras" class="carrito-compras">
        <!-- Cambia la siguiente línea con la etiqueta de imagen que desees -->
        <img id="carrito-imagen" src="https://images.vexels.com/media/users/3/200097/isolated/preview/942820836246f08c2d6be20a45a84139-carrinho-de-compras-icon-carrinho-de-compras-by-vexels.png" alt="Carrito de Compras" height="50">
        <div id="carrito-productos" class="carrito-productos">
            <!-- Aquí se mostrarán los productos agregados al carrito -->
        </div>
    </div>
      
  </li>
     </nav>
    <!-- termina la nav bar. -->

    <div id="filtroCategorias">
      <button class="btn btn-success" onclick="filtrarPorCategoria(null)">Todos</button>
      <button class="btn btn-primary" onclick="filtrarPorCategoria('Decoracion')">Decoracion</button>
      <button class="btn btn-primary" onclick="filtrarPorCategoria('Herramientas')">Herramientas</button>
      <button class="btn btn-primary" onclick="filtrarPorCategoria('Macetas')">Macetas</button>
      <!-- Otros botones de categoría... -->
    </div>

  <div id="catalogo" class="row"></div>

  <!-- Paginación de Bootstrap -->
  <nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center" id="pagination"></ul>
  </nav>

   <!-- Empieza el Carousel -->
<div id="popup" class="popup">
  <div id="carouselExample" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner" id="carouselInner"></div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <!-- Termina el Carousel -->

  <div id="detallesContainer">
    <h3>Detalles del Producto</h3>
    <p id="detallesTexto"></p>

    <!-- Agregar un contenedor con el ID paypal-button -->
    <div id="paypal-button"></div>

   
    <h3>Precio</h3>
    <p id="precioTexto"></p>
    <button class="btn btn-success btn-agregar-carrito" data-producto-id="1">Agregar al Carrito</button>
    <div id="paypal-button-container"></div>

    <script>
        paypal.Buttons({
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: '130.00' 
                        }
                    }]
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    alert('Pago completado por ' + details.payer.name.given_name);
                    
                });
            }
        }).render('#paypal-button-container');
    </script>

    <h3>Descripción</h3>
    <p id="descripcionTexto"></p>
    <button id="cerrarPopup" class="btn btn-danger">Cerrar</button>
  </div>
</div>

   <!-- Modal de Sign In -->
   <div
   class="modal fade"
   id="signinModal"
   tabindex="-1"
   aria-labelledby="exampleModalLabel"
   aria-hidden="true"
 >
   <div class="modal-dialog">
     <div class="modal-content">
       <div class="modal-header">
         <h1 class="modal-title fs-5" id="exampleModalLabel">Sign In</h1>
         <button
           type="button"
           class="btn-close"
           data-bs-dismiss="modal"
           aria-label="Close"
         ></button>
       </div>
       <div class="modal-body">
         <form id="login-form">
           <label for="email">Email:</label>
           <input
             type="email"
             class="form-control mb-3"
             id="login-email"
             placeholder="Email"
             required
           />

           <label for="password">Password:</label>
           <input
             type="password"
             class="form-control mb-3"
             id="login-password"
             placeholder="******"
             required
           />

           <button type="submit" class="btn btn-success w-100 mb-4">
             Log in
           </button>
         </form>

         <button
           type="button"
           id="googleLogin"
           class="btn btn-info w-100 mb-4"
         >
           Google
         </button>
         <div class="container text-center">
           <a href="./HTML/forgotPassword.html" class="" id=""
             >Did you forget the password?</a
           >
           <br />
           <a href="" class=""
             >You still do not have an account?</a
           >
         </div>
       </div>
     </div>
   </div>
 </div>
 <!-- Termina Modal de Sign In -->

 <!-- Modal de Sign Up -->
 <div
   class="modal fade"
   id="signupModal"
   tabindex="-1"
   aria-labelledby="exampleModalLabel"
   aria-hidden="true"
 >
   <div class="modal-dialog">
     <div class="modal-content">
       <div class="modal-header">
         <h1 class="modal-title fs-5" id="exampleModalLabel">Sign Up</h1>
         <button
           type="button"
           class="btn-close"
           data-bs-dismiss="modal"
           aria-label="Close"
         ></button>
       </div>
       <div class="modal-body">
         <form id="signup-form">
           <label for="email">Email:</label>
           <input
             id="signup-email"
             type="email"
             class="form-control mb-3"
             placeholder="Email"
             required
           />

           <label for="password">Password:</label>
           <input
             id="signup-password"
             type="password"
             class="form-control mb-3"
             placeholder="******"
             required
           />

           <button type="submit" class="btn btn-success">Register</button>
         </form>
       </div>
     </div>
   </div>
 </div>

  <script>
   let productos;
    const productosPorPagina = 9;
    let paginaActual = 1;

    fetch('productos.json')
      .then(response => response.json())
      .then(data => {
        productos = data;
        mostrarProductos(paginaActual);
        mostrarPaginacion();
      })
      .catch(error => console.error('Error al cargar el archivo JSON:', error));

      function mostrarProductos(pagina, categoriaFiltro = null) {
  const catalogoDiv = document.getElementById('catalogo');
  catalogoDiv.innerHTML = '';

  const inicio = (pagina - 1) * productosPorPagina;
  const fin = inicio + productosPorPagina;
  let productosFiltrados = productos.slice(inicio, fin);

  // Filtrar por categoría si se proporciona
  if (categoriaFiltro) {
    productosFiltrados = productosFiltrados.filter(producto => producto.categoria === categoriaFiltro);
  }

  productosFiltrados.forEach(producto => {
    catalogoDiv.innerHTML += `
      <div class="producto-container">
        <h2>${producto.nombre}</h2>
        <img src="${producto.imagen}" alt="${producto.nombre}" class="img-fluid">
        <br> 
        <br>
        <button class="btn btn-success" onclick="mostrarPopup(${producto.id})">Ver más</button>
      </div>
    `;
  });
}

    function mostrarPaginacion() {
      const totalPaginas = Math.ceil(productos.length / productosPorPagina);
      const paginationUl = document.getElementById('pagination');
      paginationUl.innerHTML = '';

      for (let i = 1; i <= totalPaginas; i++) {
        const li = document.createElement('li');
        li.classList.add('page-item');
        const a = document.createElement('a');
        a.classList.add('page-link');
        a.href = '#';
        a.textContent = i;
        a.addEventListener('click', function() {
          cambiarPagina(i);
        });
        li.appendChild(a);
        paginationUl.appendChild(li);
      }
    }

    function filtrarPorCategoria(categoria) {
  mostrarProductos(paginaActual, categoria);
  mostrarPaginacion(); // Actualizar paginación después de aplicar el filtro
}

      // Función para mostrar el popup con más información
      function mostrarPopup(id) {
  const popupDiv = document.getElementById('popup');
  const carouselInner = document.getElementById('carouselInner');
  const detallesTexto = document.getElementById('detallesTexto');
  const precioTexto = document.getElementById('precioTexto');
  const descripcionTexto = document.getElementById('descripcionTexto');
  const carritoContainer = document.getElementById('carritoContainer');
  const producto = obtenerProductoPorId(id);

  if (!producto) {
    console.error('Producto no encontrado');
    return;
  }

  // Limpiar el contenido previo del carrusel
  carouselInner.innerHTML = '';
  detallesTexto.textContent = '';
  precioTexto.textContent = '';
  descripcionTexto.textContent = '';

  // Agregar imágenes al carrusel
  producto.imagenes.forEach((imagen, index) => {
    const activeClass = index === 0 ? 'active' : '';
    carouselInner.innerHTML += `
      <div class="carousel-item ${activeClass}">
        <img src="${imagen}" class="d-block w-100" alt="Imagen ${index + 1}">
      </div>
    `;
  });

  // Actualizar el contenido de los elementos de texto
  detallesTexto.textContent = producto.detalles;
  precioTexto.textContent = `$${producto.precio.toFixed(2)}`; // Formatear el precio
  descripcionTexto.textContent = producto.descripcion;

  // Mostrar el popup
  popupDiv.style.display = 'block';
}


      // Función para obtener el producto por su ID
       function obtenerProductoPorId(id) {
      // Buscar el producto en el array de productos por su ID
      const productoEncontrado = productos.find(producto => producto.id === id);
      // Verificar si se encontró el producto
      if (productoEncontrado) {
        return productoEncontrado;
      } else {
        console.error('Producto no encontrado');
        return null;
      }
    }

    function cambiarPagina(pagina) {
      paginaActual = pagina;
      mostrarProductos(pagina);
    } 


    // Cerrar el popup al hacer clic en el botón "Cerrar"
      document.getElementById('cerrarPopup').addEventListener('click', function() {
      document.getElementById('popup').style.display = 'none';
    });
  </script>



<script src="/CarritoCompras/paypal2.js"></script>
  <!-- Main js -->
  <script src="/JavaScript/main.js" type="module"></script>
  <!-- Bootstrap js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Toastify js -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</body>
</html>




